<!DOCTYPE html>
<html>
<head>
    <title>JavaScript &amp; jQuery - Chapter 6: Events - Event Listener with Parameters</title>
    <link rel="stylesheet" href="css/c06.css"/>
</head>
<body>
<div id="page">
    <h1>List King</h1>
    <h2>New Account</h2>
    <form method="post" action="http://www.example.org/register">

        <label for="username">Create a username: </label> <input type="text" id="username"/>
        <div id="feedback"></div>

        <label for="password">Create a password: </label> <input type="password" id="password"/>

        <input type="submit" value="sign up"/>

    </form>
</div>
<script>

    var elUsername = document.getElementById('username');  // Get username input
    var elMsg = document.getElementById('feedback');       // Get feedback element

    function checkUsername(minLength)
    {                    // Declare function
        if (elUsername.value.length < minLength)
        {           // If username too short
            // Set message
            elMsg.innerHTML = 'Username must be ' + minLength + ' characters or more';
        } else
            elMsg.innerHTML = '';                              // Clear message

    }

    if (elUsername.addEventListener)
    {               // If event listener supported
        elUsername.addEventListener('blur', function ()
        {// When username loses focus
            checkUsername(5);                            // Call checkUsername()
        }, false);                                     // Capture during bubble phase
    } else
    {                                         // Otherwise
        elUsername.attachEvent('onblur', function ()
        {   // IE fallback: on blur
            checkUsername(5);                            // Call checkUsername()
        });
    }
</script>
</body>
</html>